$(document).ready(function(){$("img.edit").on("click",a=>{var e=$(a.target).parents(".header")[0],t=$(e).next()[0];$(t).find("span.info").each((a,e)=>{0==$(e).parents(".password").length&&0==$(e).parents(".username").length&&0==$(e).parents(".email").length&&$(e).addClass("hidden")}),$(t).find(".input").each((a,e)=>{0==$(e).hasClass("fixed")&&$(e).removeClass("hidden")}),toggleButton(e,"edit",!1),toggleButton(e,"save",!0),toggleButton(e,"cancel",!0)}),$("img.cancel").on("click",a=>{var e=$(a.target).parents(".header")[0],t=$(e).next()[0];$(t).find(".input").each((a,e)=>{0==$(e).hasClass("fixed")&&$(e).addClass("hidden")}),$(t).find("span.info").each((a,e)=>{$(e).removeClass("hidden")}),$(e).find("img").addClass("hidden"),toggleButton(e,"edit",!0)}),$("img.save").on("click",a=>{var e=$(a.target).parents(".header")[0],t=$(e).next()[0],n=!1,d=!1,s=$(t).find(".input").each((a,e)=>{"file"==$(e).attr("type")?n=!0:d=!0});if($(e).find("img").addClass("hidden"),toggleButton(e,"loading",!0),1==d&&0==n){var i=$(".cid").val(),l={customerName:$(s[0]).val(),sex:$(s[1]).val(),address:$(s[2]).val(),phone:$(s[3]).val()};sendRequest("user/thong-tin-tai-khoan.html/"+i,"post",l,(a,n)=>{$(t).find(".input").each((a,e)=>{0==$(e).hasClass("fixed")&&$(e).addClass("hidden")}),$(t).find("span.info").each((a,e)=>{0==$(e).parents(".sex").length?$(e).text($(e).next(".input").val()):1==$(e).next(".input").val()?$(e).text("Ná»¯"):$(e).text("Nam"),$(e).removeClass("hidden")}),$(e).find("img").addClass("hidden"),toggleButton(e,"edit",!0)},(a,t,n)=>{$(e).find("img").addClass("hidden"),toggleButton(e,"error",!0),toggleButton(e,"cancel",!0)})}else if(0==d&&1==n){l=new FormData,i=$(".cid").val();l.append("avatar",$('input[type="file"]')[0].files[0]),sendRequest("user/thong-tin-tai-khoan.html/avatar/"+i,"post",l,(a,n)=>{var d=JSON.parse(a);1==d.status&&($(".avatar .fixed").removeClass("fixed"),0<$(".avatar img").length?$(".avatar img").attr("src",d.data.url):$(".avatar").append('<span class="info"><img src="'+d.data.url+'" style="max-width: 40px;"></span>'),$(t).find(".input").each((a,e)=>{$(e).addClass("hidden")}),$(t).find("span.info").each((a,e)=>{$(e).removeClass("hidden")})),$(e).find("img").addClass("hidden"),toggleButton(e,"edit",!0)},(a,t,n)=>{$(e).find("img").addClass("hidden"),toggleButton(e,"error",!0),toggleButton(e,"cancel",!0)})}})});var toggleButton=function(a,e,t=fasle){var n=$(a).find("."+e)[0];1==t?$(n).removeClass("hidden"):$(n).addClass("hidden")},sendRequest=function(a,e,t,n,d){var s=$(".base_url").val();$.ajax({url:s+a,method:e,data:t,success:n,error:d})};